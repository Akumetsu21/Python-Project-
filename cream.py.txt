import random
import streamlit as st

emoji_quiz = {
    "ğŸğŸ“œ": "python script",
    "ğŸ”„ğŸ”": "loop",
    "ğŸ“¦ğŸ“‚": "module",
    "ğŸ“¦ğŸ“¦ğŸ“¦": "package",
    "ğŸ–¥ï¸â¡ï¸ğŸ“œ": "interpreter",
    "ğŸ­ğŸŒ€": "decorator",
    "ğŸ†•ğŸ”¤ğŸ”¢": "variable",
    "ğŸšªğŸ”™": "return statement",
    "ğŸš¨âŒğŸ": "syntax error",
    "ğŸ—ï¸ğŸ“": "data type",
    "ğŸ”¢ğŸ”€ğŸ” ": "type casting",
    "ğŸ“ŠğŸ“ˆ": "matplotlib",
    "ğŸ¼ğŸ“Š": "pandas",
    "âš¡ğŸ”£â¡ï¸ğŸ”¢": "lambda function",
    "ğŸš¦âœ…âŒ": "if-else statement",
    "âœ‚ï¸ğŸ“œ": "slicing",
    "ğŸ“¢ğŸ”¤": "print statement",
    "ğŸ’¾ğŸ“": "file handling",
    "ğŸ›‘âš ï¸ğŸ­": "exception handling",
    "ğŸ”’ğŸ": "virtual environment"
}

st.title("ğŸ Python Emoji Quiz Game ğŸ‰")

if "score" not in st.session_state:
    st.session_state.score = 0
if "question_index" not in st.session_state:
    st.session_state.question_index = 0
if "shuffled_questions" not in st.session_state:
    st.session_state.shuffled_questions = random.sample(list(emoji_quiz.items()), 5)
if "answered" not in st.session_state:
    st.session_state.answered = False

if st.session_state.question_index < 5:
    emoji, answer = st.session_state.shuffled_questions[st.session_state.question_index]
    st.subheader(f"Guess the Python term: {emoji}")
    user_guess = st.text_input("Your answer: ", key=f"input_{st.session_state.question_index}").strip().lower()
    
    if st.button("Submit") and not st.session_state.answered:
        if user_guess == answer:
            st.success("âœ… Correct!")
            st.session_state.score += 1
        else:
            st.error(f"âŒ Wrong! The correct answer was: {answer}")
        st.session_state.answered = True
    
    if st.session_state.answered and st.button("Next"):
        st.session_state.question_index += 1
        st.session_state.answered = False
        st.rerun()
else:
    st.subheader(f"Game Over! Your final score is {st.session_state.score}/5 ğŸ‰")
    if st.button("Play Again"):
        st.session_state.score = 0
        st.session_state.question_index = 0
        st.session_state.shuffled_questions = random.sample(list(emoji_quiz.items()), 5)
        st.session_state.answered = False
        st.rerun()